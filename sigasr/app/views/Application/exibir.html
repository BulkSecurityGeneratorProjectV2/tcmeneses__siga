#{extends 'main.html' /}

<div class="gt-bd clearfix">
	<div class="gt-content clearfix">

		#{quadroSolicitacao solicitacao:solicitacao, ocultarCodigo:true,
		titulo:'Solicitação '+solicitacao.codigo /}

		<div class="gt-content-box gt-for-table" style="margin-top: 15px;">
			#{form @Application.andamento(solicitacao.idSolicitacao),
			enctype:'multipart/form-data'}
			<table class="gt-form-table">
				<colgroup>
					<col width="30%" />
				</colgroup>
				<tr class="header">
					<td align="center" valign="top" colspan="4">Cadastrar
						andamento</td>
				</tr>
				#{if exibirAtendente}
				<tr>
					<td>Atendente</td>
					<td>#{pessoaLotaSelecao nomeSelPessoa:'Atendente',
						nomeSelLotacao:'LotaAtendente', valuePessoa:pessoaAtendenteSel,
						valueLotacao:lotacaoLotaAtendenteSel /}</td>
				</tr>
				#{/if}
				<tr>
					<td>Descrição:</td>
					<td><textarea name="andamento.descrAndamento"
							id="descrSolicitacao" cols="70" rows="4"
							value="${andamento.descrAndamento}"></textarea></td>
				</tr>
				<tr>
					<td>Anexar arquivo:</td>
					<td><input type="file" name="arquivo"></td>
				</tr>
				<tr>
					<td>Situação:</td>
					<td>#{select 'andamento.estado', items:estados,
						labelProperty:'descrEstado', value:andamento.estado,
						valueProperty:idEstado} #{/select}</td>
				</tr>
				<tr>
					<td colspan="2"><input type="submit" value="Gravar"
						class="gt-btn-medium gt-btn-left" /></td>
				</tr>
			</table>
			#{/form}
		</div>

		<!-- content box -->
		<div class="gt-content-box" style="margin-top: 15px;">
			<table border="0" class="gt-table">
				<thead>
					<tr>
						<th>Momento</th>
						<th>Situação</th>
						<th colspan="2">Atendente</th>
						<th colspan="2">Cadastrante</th>
						<th>Anexo</th>
						<th>Descrição</th>
					</tr>
				</thead>

				<tbody>
					#{list items:solicitacao.andamentoSet, as:'andamento'}
					<tr>
						<td>${andamento.dtRegString}</td>
						<td>${andamento.estado.descrEstado}</td>
						<td>#{selecionado
							sigla:andamento.lotaAtendente?.siglaLotacao,
							descricao:andamento.lotaAtendente?.nomeLotacao /}</td>
						<td>#{selecionado sigla:andamento.atendente?.nomeAbreviado,
							descricao:andamento.atendente?.descricaoIniciaisMaiusculas /}</td>
						<td>#{selecionado
							sigla:andamento.lotaCadastrante?.siglaLotacao,
							descricao:andamento.lotaCadastrante?.nomeLotacao /}</td>
						<td>#{selecionado sigla:andamento.cadastrante?.nomeAbreviado,
							descricao:andamento.cadastrante?.descricaoIniciaisMaiusculas /}</td>
						<td>#{arquivo arquivo:andamento.arquivo /}</td>
						<td>${andamento.descrAndamento}</td>
					</tr>
					#{/list}
				</tbody>
			</table>
		</div>
		<!-- /content box -->

	</div>
</div>

<br />
<br />
<br />